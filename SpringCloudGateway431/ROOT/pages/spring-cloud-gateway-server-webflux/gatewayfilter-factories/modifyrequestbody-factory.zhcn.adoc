[[modifyrequestbody-gatewayfilter-factory]]
= `ModifyRequestBody` `GatewayFilter` 工厂

你可以使用 `ModifyRequestBody` 过滤器在网关将请求发送到下游服务之前修改请求体。

NOTE: 此过滤器只能通过 Java DSL 方式进行配置。

以下示例展示了如何配置修改请求体的 `GatewayFilter`：

[source,java]
----
@Bean
public RouteLocator routes(RouteLocatorBuilder builder) {
    return builder.routes()
        .route("rewrite_request_obj", r -> r.host("*.rewriterequestobj.org")
            .filters(f -> f.prefixPath("/httpbin")
                .modifyRequestBody(String.class, Hello.class, MediaType.APPLICATION_JSON_VALUE,
                    (exchange, s) -> Mono.just(new Hello(s.toUpperCase())))).uri(uri))
        .build();
}

static class Hello {
    String message;

    public Hello() { }

    public Hello(String message) {
        this.message = message;
    }

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }
}
----

NOTE: 如果请求没有请求体，`RewriteFilter` 将接收到 `null`。此时应返回 `Mono.empty()`，表示请求中不包含请求体。