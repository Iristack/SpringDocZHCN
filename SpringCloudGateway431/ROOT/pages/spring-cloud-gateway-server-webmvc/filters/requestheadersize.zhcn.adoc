[[requestheadersize-filter]]
= `RequestHeaderSize` 过滤器
:page-section-summary-toc: 1

`RequestHeaderSize` 过滤器接受 `maxSize` 和 `errorHeaderName` 两个参数。  
`maxSize` 参数表示请求头（包括键和值）允许的最大数据大小。`errorHeaderName` 参数用于设置包含错误消息的响应头名称，默认为 "errorMessage"。  
以下配置示例展示了如何设置一个 `RequestHeaderSize` 过滤器：

.application.yml
[source,yaml]
----
spring:
  cloud:
    gateway:
      mvc:
        routes:
        - id: requestheadersize_route
          uri: https://example.org
          predicates:
          - Path=/**
          filters:
          - RequestHeaderSize=1000B
----

.GatewaySampleApplication.java
[source,java]
----
import static org.springframework.cloud.gateway.server.mvc.filter.BeforeFilterFunctions.uri;
import static org.springframework.cloud.gateway.server.mvc.filter.BeforeFilterFunctions.requestHeaderSize;
import static org.springframework.cloud.gateway.server.mvc.handler.GatewayRouterFunctions.route;
import static org.springframework.cloud.gateway.server.mvc.handler.HandlerFunctions.http;

@Configuration
class RouteConfiguration {

    @Bean
    public RouterFunction<ServerResponse> gatewayRouterFunctionsRequestHeaderSize() {
        return route("requestheadersize_route")
            .GET("/**", http())
            .before(uri("https://example.org"))
            .before(requestHeaderSize("1000B"))
            .build();
    }
}
----

如果任何请求头的大小超过 1000 字节，该过滤器将返回 HTTP 状态码 431（Request Header Fields Too Large）。