= 使用 CSRF 进行测试

Spring Security 还为 `WebTestClient` 提供了对 CSRF 测试的支持，例如：

[tabs]
======
Java::
+
[source,java,role="primary"]
----
import static org.springframework.security.test.web.reactive.server.SecurityMockServerConfigurers.csrf;

this.rest
	// 提供一个有效的 CSRF 令牌
	.mutateWith(csrf())
	.post()
	.uri("/login")
	...
----

Kotlin::
+
[source,kotlin,role="secondary"]
----
import org.springframework.security.test.web.reactive.server.SecurityMockServerConfigurers.csrf

this.rest
    // 提供一个有效的 CSRF 令牌
    .mutateWith(csrf())
    .post()
    .uri("/login")
    ...
----
======